!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).shave=t()}(this,function(){"use strict";function b(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),l=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)l.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return l}function j(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||((r=r||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}return function(e,t,n){if(void 0===t||isNaN(t))throw Error("maxHeight is required");var r="string"==typeof e?j([],b(document.querySelectorAll(e)),!1):"length"in e?j([],b(e),!1):[e];if(r.length)for(var e=(null==n?void 0:n.character)||"&mldr;",i=(null==n?void 0:n.classname)||"js-shave",o="boolean"!=typeof(null==n?void 0:n.spaces)||n.spaces,l=(null==n?void 0:n.charclassname)||"js-shave-char",a='<span class="'+l+'">'+e+"</span>",s=0;s<r.length;s+=1){var c=r[s],f=c.style,d=c.querySelector("."+i),h=void 0===c.textContent?"innerText":"textContent";d&&(c.removeChild(c.querySelector("."+l)),c[h]=c[h]);var u=c[h],p=o?u.split(" "):u;if(!(p.length<2)){var y=f.height;f.height="auto";var v=f.maxHeight;if(f.maxHeight="none",c.offsetHeight<=t)f.height=y,f.maxHeight=v;else{for(var g,m=p.length-1,x=0;x<m;)g=x+m+1>>1,c[h]=o?p.slice(0,g).join(" "):p.slice(0,g),c.insertAdjacentHTML("beforeend",a),c.offsetHeight>t?m=g-1:x=g;c[h]=o?p.slice(0,m).join(" "):p.slice(0,m),c.insertAdjacentHTML("beforeend",a);d=o?" "+p.slice(m).join(" "):p.slice(m),u=document.createTextNode(d),d=document.createElement("span");d.classList.add(i),d.style.display="none",d.appendChild(u),c.insertAdjacentElement("beforeend",d),f.height=y,f.maxHeight=v}}}}});
