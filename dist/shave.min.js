!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).shave=t()}(this,function(){"use strict";function q(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function T(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}return function(e,t,n){if(void 0===n&&(n={}),void 0===t||isNaN(t))throw Error("maxHeight is required");var r="string"==typeof(i=e)?T([],q(document.querySelectorAll(i)),!1):"length"in i?T([],q(i),!1):[i];if(r.length){var o=n.character,e=void 0===o?"&mldr;":o,i=n.classname,a=void 0===i?"js-shave":i,o=n.spaces,i=void 0===o||o,o=n.charclassname,l=void 0===o?"js-shave-char":o,n=n.link,s=void 0===n?{}:n,c="boolean"!=typeof i||i,i="{}"!==JSON.stringify(s),e=i&&s.textContent?s.textContent:e,f=document.createElement(i?"a":"span"),d={textContent:e,className:l};if(i)for(var h in s)d[h]=s[h];for(h in d)f[h]=d[h];for(var u=0;u<r.length;u+=1){var v=r[u],m=v.style,y=v.querySelector("."+a),g=void 0===v.textContent?"innerText":"textContent";if(y){for(var p=v.querySelectorAll("."+l),x=0;x<p.length;x++){var b=p[x];b.parentNode.removeChild(b)}v[g]=v[g]}var j=v[g],A=c?j.split(" "):j;if(!(A.length<2)){var C=m.height;m.height="auto";var H=m.maxHeight;if(m.maxHeight="none",v.offsetHeight<=t)m.height=C,m.maxHeight=H;else{for(var E,N=A.length-1,S=0;S<N;)E=S+N+1>>1,v[g]=c?A.slice(0,E).join(" "):A.slice(0,E),v.insertAdjacentElement("beforeend",f),v.offsetHeight>t?N=E-1:S=E;v[g]=c?A.slice(0,N).join(" "):A.slice(0,N),v.insertAdjacentElement("beforeend",f);y=c?" "+A.slice(N).join(" "):A.slice(N),j=document.createTextNode(y),y=document.createElement("span");y.classList.add(a),y.style.display="none",y.appendChild(j),v.insertAdjacentElement("beforeend",y),m.height=C,m.maxHeight=H}}}}}});
