!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).shave=t()}(this,function(){"use strict";function T(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function w(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||((r=r||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}return function(e,t,n){if(void 0===n&&(n={}),void 0===t||isNaN(t))throw Error("maxHeight is required");var r="string"==typeof(a=e)?w([],T(document.querySelectorAll(a)),!1):"length"in a?w([],T(a),!1):[a];if(r.length){var o,i=n.character,e=void 0===i?"&mldr;":i,a=n.classname,l=void 0===a?"js-shave":a,i=n.spaces,a=void 0===i||i,i=n.charclassname,s=void 0===i?"js-shave-char":i,n=n.link,c=void 0===n?{}:n,f="boolean"!=typeof a||a,a="{}"!==JSON.stringify(c),e=a&&c.textContent?c.textContent:e,d=document.createElement(a?"a":"span"),h={textContent:e,className:s};if(a)for(var u in c)h[u]=c[u];for(o in h)d[o]=h[o];for(var v=0;v<r.length;v+=1){var m=r[v],y=m.style,g=m.querySelector("."+l),p=void 0===m.textContent?"innerText":"textContent";if(g){for(var x=m.querySelectorAll("."+s),b=0;b<x.length;b++){var j=x[b];j.parentNode.removeChild(j)}m[p]=m[p]}var A=m[p],C=f?A.split(" "):A;if(!(C.length<2)){var H=y.height;y.height="auto";var E=y.maxHeight;if(y.maxHeight="none",m.offsetHeight<=t)y.height=H,y.maxHeight=E;else{for(var N,S=C.length-1,q=0;q<S;)N=q+S+1>>1,m[p]=f?C.slice(0,N).join(" "):C.slice(0,N),m.insertAdjacentElement("beforeend",d),m.offsetHeight>t?S=N-1:q=N;m[p]=f?C.slice(0,S).join(" "):C.slice(0,S),m.insertAdjacentElement("beforeend",d);g=f?" "+C.slice(S).join(" "):C.slice(S),A=document.createTextNode(g),g=document.createElement("span");g.classList.add(l),g.style.display="none",g.appendChild(A),m.insertAdjacentElement("beforeend",g),y.height=H,y.maxHeight=E}}}}}});
