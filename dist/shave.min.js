!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).shave=t()}(this,function(){"use strict";function j(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function H(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||((r=r||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}return function(e,t,n){if(void 0===n&&(n={}),void 0===t||isNaN(t))throw Error("maxHeight is required");var r="string"==typeof(o=e)?H([],j(document.querySelectorAll(o)),!1):"length"in o?H([],j(o),!1):[o];if(r.length)for(var e=n.character,i=void 0===(o=n.classname)?"js-shave":o,o=void 0===(o=n.spaces)||o,a=void 0===(n=n.charclassname)?"js-shave-char":n,l="boolean"!=typeof o||o,s='<span class="'+a+'">'+(void 0===e?"&mldr;":e)+"</span>",c=0;c<r.length;c+=1){var f=r[c],d=f.style,h=f.querySelector("."+i),u=void 0===f.textContent?"innerText":"textContent";h&&(f.removeChild(f.querySelector("."+a)),f[u]=f[u]);var v=f[u],y=l?v.split(" "):v;if(!(y.length<2)){var p=d.height;d.height="auto";var g=d.maxHeight;if(d.maxHeight="none",f.offsetHeight<=t)d.height=p,d.maxHeight=g;else{for(var m,x=y.length-1,b=0;b<x;)m=b+x+1>>1,f[u]=l?y.slice(0,m).join(" "):y.slice(0,m),f.insertAdjacentHTML("beforeend",s),f.offsetHeight>t?x=m-1:b=m;f[u]=l?y.slice(0,x).join(" "):y.slice(0,x),f.insertAdjacentHTML("beforeend",s);h=l?" "+y.slice(x).join(" "):y.slice(x),v=document.createTextNode(h),h=document.createElement("span");h.classList.add(i),h.style.display="none",h.appendChild(v),f.insertAdjacentElement("beforeend",h),d.height=p,d.maxHeight=g}}}}});
