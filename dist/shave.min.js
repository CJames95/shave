!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).shave=t()}(this,function(){"use strict";function S(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,i,r=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(o=r.next()).done;)a.push(o.value)}catch(e){i={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return a}function N(e,t,n){if(n||2===arguments.length)for(var o,i=0,r=t.length;i<r;i++)!o&&i in t||((o=o||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(o||Array.prototype.slice.call(t))}return function(e,t,n){if(void 0===n&&(n={}),void 0===t||isNaN(t))throw Error("maxHeight is required");var o="string"==typeof(e=e)?N([],S(document.querySelectorAll(e)),!1):"length"in e?N([],S(e),!1):[e];if(o.length){var i,e=n.character,e=void 0===e?"&mldr;":e,r=n.classname,a=void 0===r?"js-shave":r,r=n.spaces,r=void 0===r||r,l=n.charclassname,c=void 0===l?"js-shave-char":l,l=n.link,s=void 0===l?{}:l,f="boolean"!=typeof r||r,n=s&&"{}"!==JSON.stringify(s)&&s.href,l=n&&s.textContent?s.textContent:e,d=document.createElement(n?"a":"span"),h={textContent:l,className:c};for(i in h)d[i]=h[i];if(n)for(var u in s)d[u]=s[u];for(var v=0;v<o.length;v+=1){var m=o[v],y=m.style,g=m.querySelector("."+a),p=void 0===m.textContent?"innerText":"textContent",g=(g&&(m.removeChild(m.querySelector("."+c)),m[p]=m[p]),m[p]),x=f?g.split(" "):g;if(!(x.length<2)){var g=y.height,b=(y.height="auto",y.maxHeight);if(y.maxHeight="none",m.offsetHeight<=t)y.height=g,y.maxHeight=b;else{for(var j,C=x.length-1,H=0;H<C;)j=H+C+1>>1,m[p]=f?x.slice(0,j).join(" "):x.slice(0,j),m.insertAdjacentElement("beforeend",d),m.offsetHeight>t?C=j-1:H=j;m[p]=f?x.slice(0,C).join(" "):x.slice(0,C),m.insertAdjacentElement("beforeend",d);var A=f?" ".concat(x.slice(C).join(" ")):x.slice(C),A=document.createTextNode(A),E=document.createElement("span");E.classList.add(a),E.style.display="none",E.appendChild(A),m.insertAdjacentElement("beforeend",E),y.height=g,y.maxHeight=b}}}}}});
