!function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){"use strict";function j(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(i=o.next()).done;)a.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function H(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||((i=i||Array.prototype.slice.call(t,0,r))[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function n(e,t,n){if(void 0===n&&(n={}),void 0===t||isNaN(t))throw Error("maxHeight is required");var i="string"==typeof(r=e)?H([],j(document.querySelectorAll(r)),!1):"length"in r?H([],j(r),!1):[r];if(i.length)for(var e=n.character,r=n.classname,o=void 0===r?"js-shave":r,r=n.spaces,r=void 0===r||r,n=n.charclassname,a=void 0===n?"js-shave-char":n,l="boolean"!=typeof r||r,c='<span class="'+a+'">'+(void 0===e?"&mldr;":e)+"</span>",s=0;s<i.length;s+=1){var d=i[s],f=d.style,h=d.querySelector("."+o),u=void 0===d.textContent?"innerText":"textContent";h&&(d.removeChild(d.querySelector("."+a)),d[u]=d[u]);var v=d[u],y=l?v.split(" "):v;if(!(y.length<2)){var g=f.height;f.height="auto";var p=f.maxHeight;if(f.maxHeight="none",d.offsetHeight<=t)f.height=g,f.maxHeight=p;else{for(var m,w=y.length-1,x=0;x<w;)m=x+w+1>>1,d[u]=l?y.slice(0,m).join(" "):y.slice(0,m),d.insertAdjacentHTML("beforeend",c),d.offsetHeight>t?w=m-1:x=m;d[u]=l?y.slice(0,w).join(" "):y.slice(0,w),d.insertAdjacentHTML("beforeend",c);h=l?" "+y.slice(w).join(" "):y.slice(w),v=document.createTextNode(h),h=document.createElement("span");h.classList.add(o),h.style.display="none",h.appendChild(v),d.insertAdjacentElement("beforeend",h),f.height=g,f.maxHeight=p}}}}var e;"undefined"==typeof window||(e=window.$||window.jQuery||window.Zepto)&&(e.fn.shave=function(e,t){return n(this,e,t),this})});
