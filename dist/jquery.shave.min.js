!function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){"use strict";function b(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function S(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||((r=r||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function n(e,t,n){if(void 0===n&&(n={}),void 0===t||isNaN(t))throw Error("maxHeight is required");var r="string"==typeof(i=e)?S([],b(document.querySelectorAll(i)),!1):"length"in i?S([],b(i),!1):[i];if(r.length)for(var e=n.character,i=n.classname,o=void 0===i?"js-shave":i,i=n.spaces,i=void 0===i||i,n=n.charclassname,a=void 0===n?"js-shave-char":n,l="boolean"!=typeof i||i,c='<span class="'+a+'">'+(void 0===e?"&mldr;":e)+"</span>",s=0;s<r.length;s+=1){var f=r[s],d=f.style,h=f.querySelector("."+o),u=void 0===f.textContent?"innerText":"textContent";if(h){for(var v=f.querySelectorAll("."+a),y=0;y<v.length;y++){var g=v[y];g.parentNode.removeChild(g)}f[u]=f[u]}var p=f[u],m=l?p.split(" "):p;if(!(m.length<2)){var w=d.height;d.height="auto";var x=d.maxHeight;if(d.maxHeight="none",f.offsetHeight<=t)d.height=w,d.maxHeight=x;else{for(var j,H=m.length-1,A=0;A<H;)j=A+H+1>>1,f[u]=l?m.slice(0,j).join(" "):m.slice(0,j),f.insertAdjacentHTML("beforeend",c),f.offsetHeight>t?H=j-1:A=j;f[u]=l?m.slice(0,H).join(" "):m.slice(0,H),f.insertAdjacentHTML("beforeend",c);h=l?" "+m.slice(H).join(" "):m.slice(H),p=document.createTextNode(h),h=document.createElement("span");h.classList.add(o),h.style.display="none",h.appendChild(p),f.insertAdjacentElement("beforeend",h),d.height=w,d.maxHeight=x}}}}var e;"undefined"==typeof window||(e=window.$||window.jQuery||window.Zepto)&&(e.fn.shave=function(e,t){return n(this,e,t),this})});
