!function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){"use strict";function q(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(i=o.next()).done;)a.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function T(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||((i=i||Array.prototype.slice.call(t,0,r))[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function n(e,t,n){if(void 0===n&&(n={}),void 0===t||isNaN(t))throw Error("maxHeight is required");var i="string"==typeof(a=e)?T([],q(document.querySelectorAll(a)),!1):"length"in a?T([],q(a),!1):[a];if(i.length){var r,o=n.character,e=void 0===o?"&mldr;":o,a=n.classname,l=void 0===a?"js-shave":a,o=n.spaces,a=void 0===o||o,o=n.charclassname,c=void 0===o?"js-shave-char":o,n=n.link,s=void 0===n?{}:n,f="boolean"!=typeof a||a,a="{}"!==JSON.stringify(s),e=a&&s.textContent?s.textContent:e,d=document.createElement(a?"a":"span"),h={textContent:e,className:c};if(a)for(var v in s)h[v]=s[v];for(r in h)d[r]=h[r];for(var u=0;u<i.length;u+=1){var y=i[u],m=y.style,g=y.querySelector("."+l),p=void 0===y.textContent?"innerText":"textContent";if(g){for(var x=y.querySelectorAll("."+c),w=0;w<x.length;w++){var j=x[w];j.parentNode.removeChild(j)}y[p]=y[p]}var A=y[p],C=f?A.split(" "):A;if(!(C.length<2)){var H=m.height;m.height="auto";var b=m.maxHeight;if(m.maxHeight="none",y.offsetHeight<=t)m.height=H,m.maxHeight=b;else{for(var E,N=C.length-1,S=0;S<N;)E=S+N+1>>1,y[p]=f?C.slice(0,E).join(" "):C.slice(0,E),y.insertAdjacentElement("beforeend",d),y.offsetHeight>t?N=E-1:S=E;y[p]=f?C.slice(0,N).join(" "):C.slice(0,N),y.insertAdjacentElement("beforeend",d);g=f?" "+C.slice(N).join(" "):C.slice(N),A=document.createTextNode(g),g=document.createElement("span");g.classList.add(l),g.style.display="none",g.appendChild(A),y.insertAdjacentElement("beforeend",g),m.height=H,m.maxHeight=b}}}}}var e;"undefined"==typeof window||(e=window.$||window.jQuery||window.Zepto)&&(e.fn.shave=function(e,t){return n(this,e,t),this})});
