!function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){"use strict";function x(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(i=o.next()).done;)a.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function j(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||((i=i||Array.prototype.slice.call(t,0,r))[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var e;"undefined"==typeof window||(e=window.$||window.jQuery||window.Zepto)&&(e.fn.shave=function(e,t){return function(e,t,n){if(void 0===t||isNaN(t))throw Error("maxHeight is required");var i="string"==typeof e?j([],x(document.querySelectorAll(e)),!1):"length"in e?j([],x(e),!1):[e];if(i.length)for(var e=(null==n?void 0:n.character)||"&mldr;",r=(null==n?void 0:n.classname)||"js-shave",o="boolean"!=typeof(null==n?void 0:n.spaces)||n.spaces,a=(null==n?void 0:n.charclassname)||"js-shave-char",l='<span class="'+a+'">'+e+"</span>",s=0;s<i.length;s+=1){var c=i[s],f=c.style,d=c.querySelector("."+r),h=void 0===c.textContent?"innerText":"textContent";d&&(c.removeChild(c.querySelector("."+a)),c[h]=c[h]);var u=c[h],v=o?u.split(" "):u;if(!(v.length<2)){var y=f.height;f.height="auto";var p=f.maxHeight;if(f.maxHeight="none",c.offsetHeight<=t)f.height=y,f.maxHeight=p;else{for(var g,m=v.length-1,w=0;w<m;)g=w+m+1>>1,c[h]=o?v.slice(0,g).join(" "):v.slice(0,g),c.insertAdjacentHTML("beforeend",l),c.offsetHeight>t?m=g-1:w=g;c[h]=o?v.slice(0,m).join(" "):v.slice(0,m),c.insertAdjacentHTML("beforeend",l);d=o?" "+v.slice(m).join(" "):v.slice(m),u=document.createTextNode(d),d=document.createElement("span");d.classList.add(r),d.style.display="none",d.appendChild(u),c.insertAdjacentElement("beforeend",d),f.height=y,f.maxHeight=p}}}}(this,e,t),this})});
